<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack核心对象 | 个人博客</title>
    <meta name="description" content="记录技术想法">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/blogBuild/assets/style.COiIc5GV.css" as="style">
    <link rel="preload stylesheet" href="/blogBuild/vp-icons.css" as="style">
    
    <script type="module" src="/blogBuild/assets/app.CjHqBHs-.js"></script>
    <link rel="preload" href="/blogBuild/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blogBuild/assets/chunks/theme.YsTd2G-h.js">
    <link rel="modulepreload" href="/blogBuild/assets/chunks/framework.DEWO2zTc.js">
    <link rel="modulepreload" href="/blogBuild/assets/learning_webpack_1_compilation_index.md.BLj2Fr37.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/blogBuild/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>个人博客</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>MusicPlayer</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><HelloWorld data-v-b98bc113></HelloWorld><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blogBuild/article/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>知识库</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>源码学习</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/" data-v-35975db6><!--[--><span data-v-35975db6>概述</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>webpack</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/webpack.html" data-v-35975db6><!--[--><span data-v-35975db6>概述</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/webpack/1_compilation.html" data-v-35975db6><!--[--><span data-v-35975db6>核心对象1</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/webpack/2_compilation2.html" data-v-35975db6><!--[--><span data-v-35975db6>核心对象2</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/webpack/3_asyncQueue.html" data-v-35975db6><!--[--><span data-v-35975db6>异步任务调度</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/webpack/4_desingPattern.html" data-v-35975db6><!--[--><span data-v-35975db6>设计模式</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/weakReference.html" data-v-35975db6><!--[--><span data-v-35975db6>弱引用</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>mvvm</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/mvvm.html" data-v-35975db6><!--[--><span data-v-35975db6>概述</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/mvvm/vue.html" data-v-35975db6><!--[--><span data-v-35975db6>Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/mvvm/angular.html" data-v-35975db6><!--[--><span data-v-35975db6>Angular</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blogBuild/learning/metaprogramming.html" data-v-35975db6><!--[--><span data-v-35975db6>元编程</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>项目</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/rabc.html" data-v-35975db6><!--[--><span data-v-35975db6>RABC</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/DORA.html" data-v-35975db6><!--[--><span data-v-35975db6>效能度量</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>组件设计</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/componentDesign.html" data-v-35975db6><!--[--><span data-v-35975db6>概述</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/componentDesign/componentArchitecture.html" data-v-35975db6><!--[--><span data-v-35975db6>组织结构</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/componentDesign/componentLogicReuse.html" data-v-35975db6><!--[--><span data-v-35975db6>组件抽象</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>通信</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/communication.html" data-v-35975db6><!--[--><span data-v-35975db6>概述</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/communication/component.html" data-v-35975db6><!--[--><span data-v-35975db6>组件</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/communication/class.html" data-v-35975db6><!--[--><span data-v-35975db6>类</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/communication/ipc.html" data-v-35975db6><!--[--><span data-v-35975db6>进程</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>CPP项目</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/cpp.html" data-v-35975db6><!--[--><span data-v-35975db6>总览</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/cpp/1_threadPool.html" data-v-35975db6><!--[--><span data-v-35975db6>线程池</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/blogBuild/project/cpp/2_connectionPool.html" data-v-35975db6><!--[--><span data-v-35975db6>连接池</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blogBuild/knowledge/jsFundation/code/ " tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>计算机科学</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blogBuild/techStack.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>技术栈</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><div class="VPSidebarItem level-0 is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/metaprogramming.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>元编程</p><!--]--></a><!----></div><!----></div></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/mvvm.html" data-v-b7550ba0><!--[--><h2 class="text" data-v-b7550ba0>MVVM前端框架</h2><!--]--></a><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/mvvm/angular.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Angular数据驱动UI变化</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/mvvm/vue.html" data-v-b7550ba0><!--[--><h3 class="text" data-v-b7550ba0>Vue数据驱动UI变化</h3><!--]--></a><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/mvvm/vue/1_dependency_collection.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Vue响应收集</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/mvvm/vue/2_diff.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Diff算法更新视图</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><div class="VPSidebarItem level-0 is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/weakReference.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>弱引用理念和运用</p><!--]--></a><!----></div><!----></div></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/webpack.html" data-v-b7550ba0><!--[--><h2 class="text" data-v-b7550ba0>webpack源码学习</h2><!--]--></a><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/webpack/1_compilation.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>打包过程中核心对象1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/webpack/2_compilation2.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>打包过程中核心对象2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/webpack/3_asyncQueue.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>异步任务调度</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/webpack/4_desingPattern.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blogBuild/learning/webpack/5_loader.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>loader翻译</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _blogBuild_learning_webpack_1_compilation_" data-v-39a288b8><div><p>我们通过了解Webpack的核心概念，来看Webpack是如何通过面向对象<strong>去临摹、表达</strong>这些核心概念。 如何组织这些类的类间关系。梳理清每个类的职责和功能，对了解Webpack的整个打包流程，以及其中运用到的设计模式都有很大的帮助。 因此本章节，从概念出发，了解打包过程的基本概念，以及webpack的核心对象。</p><h1 id="webpack核心对象" tabindex="-1">Webpack核心对象 <a class="header-anchor" href="#webpack核心对象" aria-label="Permalink to &quot;Webpack核心对象&quot;">​</a></h1><p><img src="/blogBuild/learning/webpack/webpack_core_models.png" alt="An image"></p><h2 id="dependency" tabindex="-1">Dependency <a class="header-anchor" href="#dependency" aria-label="Permalink to &quot;Dependency&quot;">​</a></h2><p>Dependency类是<strong>webpack对文件依赖的一种表达</strong>。Dependency的派生类有很多。 每一种派生类型都对应一种依赖形式。<br> 如下例子中entry1.js文件本身是Webpack打包的入口文件。因此对于entry1.js文件，webpack将其视为一种依赖，EntryDependency。 entry1.js文件通过import的声明方式，表明其需要&#39;./lib/a.js&#39;, &#39;./lib/b.js&#39;, &#39;./lib/c.js&#39;这些js文件。因此webpack将a.js文件，b.js文件, c.js文件当作成一种依赖 ，HarmonyImportDependency。如果从CommonJs中require一个模块，那么Webpack就将这个模块当作是CommonJSRequireDependency。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// entry1.js文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./lib/a.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./lib/b.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./lib/c.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// entry1.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c);</span></span></code></pre></div><h2 id="dependenciesblock" tabindex="-1">DependenciesBlock <a class="header-anchor" href="#dependenciesblock" aria-label="Permalink to &quot;DependenciesBlock&quot;">​</a></h2><p>模块化编程中，开发者将程序分解为功能离散的模块。每个模块提供了可靠的抽象和封装的界限。模块都具备条理清晰的设计和明确的目的。 Webpack的<strong>DependenciesBlock就是对这种模块概念的一种表达</strong>。DepdencisBlock是所有Module类的一个抽象类。在上文中，我们介绍了依赖的概念，一个文件(模块)依赖另一个js文件，这种是一种依赖关系。那么在类间关系的设计上DependenciesBlock，一对多持有Dependency。 DependenciesBlcok类中维护其依赖的变量。以及添加dependency和移除dependency的行为。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DependenciesBlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Dependency[]}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dependencies </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {AsyncDependenciesBlock[]}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.blocks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {DependenciesBlock | undefined}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Dependency}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dependency</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> dependency being tied to block.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * This is an &quot;edge&quot; pointing to another &quot;node&quot; on module graph.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {void}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	addDependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dependencies.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dependency);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Dependency}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dependency</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> dependency being removed</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {void}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	removeDependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dependencies.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dependency);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dependencies.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">splice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(idx, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>DependenciesBlock派生类有两个，一个是Module，另一个是AsyncDependenciesBlcok。 其中Module也是个抽象类中，是从DependenciesBlock上泛化出来的概念。 Module中定义了所有子类需要遵循的概念，identifier(), build(), ....等等。其中最为重要的就是build()抽象方法。 我们回顾一下，DependenciesBlock与Dependency的类间关系，它们是一对多的关系，建立关系实在DependenciesBlcok这一方。 它有添加依赖的这个行为。build()这个抽象的方法，就是在针对不同的子类Module寻找其依赖的一个笼统的行为概念。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 抽象方法</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AbstractMethodError</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./AbstractMethodError&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractMethodError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>Module对象的派生类非常多，一种Dependency对应一种Module。NormalModule代表除了一些特殊模块之外的普通模块。 NormalModule对象中包含了解析该模块的parser, 翻译该文件的loaders，存储当前模块对应的源码_source。 在NormalModule的build()行为，NormalModule利用loaders， parser进行解析，寻找当前模块的一个依赖关系。</p><h2 id="modulefactory" tabindex="-1">ModuleFactory <a class="header-anchor" href="#modulefactory" aria-label="Permalink to &quot;ModuleFactory&quot;">​</a></h2><p>一个模块可以依赖其它的模块，也可以被其它的模块所依赖。 那么就涉及到将依赖转化成模块的问题。 这个功能交给了ModuleFactory类进行处理。ModuleFactory是一个抽象类，抽象类中定义craete创建行为。 create行为就是将依赖转化为模块的调用方法。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">		data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleFactoryCreateData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleFactoryResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>上面说到一种依赖对应一种工厂，工厂创建后的产物是模块。工厂和依赖的对应关系是在哪里声明的?<br> 这种关联关系的声明是在Plugin中进行关联的，以HarmonyModulesPlugin为例。 HarmonyModulesPlugin中，给comilation的dependencyFactories中设置了HarmonyImportSideEffectDependency与 normalModuleFactory之间的关系。这种依赖经过normalModuleFactory工厂的加工就会变为NormalModule。 更多的关联关系在webpack/lib/dependencies下的各种plugin中。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HarmonyModulesPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compiler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(compiler) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		compiler.hooks.compilation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			PLUGIN_NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">normalModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				compilation.dependencyTemplates.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					HarmonyCompatibilityDependency,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">					new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HarmonyCompatibilityDependency.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 设置关联关系. 将一种dependency与factory进行绑定</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				compilation.dependencyFactories.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					HarmonyImportSideEffectDependency,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					normalModuleFactory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="javascriptparser" tabindex="-1">JavascriptParser <a class="header-anchor" href="#javascriptparser" aria-label="Permalink to &quot;JavascriptParser&quot;">​</a></h2><p>在上述的过程中，有一个问题是<strong>Wepback是如何识别到某个文件依赖某个文件的?</strong><br> 这个识别依赖的功能由JavascriptParser这个类来承担。如这个类名所表达的一样，JavasriptParser类，用于解析将源码通过loaders转义后的js代码。 解析的目的是找到模块对应的依赖。通过分析抽象语法树, 识别依赖描述。将依赖添加该模块的依赖中。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JavascriptParser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Parser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ast;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {import(&quot;acorn&quot;).Comment[]}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // .....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ast </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JavascriptParser.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    sourceType: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.sourceType,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    onComment: comments,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    onInsertedSemicolon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> semicolons.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pos)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// .....</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 检查依赖</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preWalkStatements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ast.body);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blockPreWalkStatements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ast.body);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">walkStatements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ast.body);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="compilation" tabindex="-1">Compilation <a class="header-anchor" href="#compilation" aria-label="Permalink to &quot;Compilation&quot;">​</a></h2><p>至此我们回顾一下目前为止介绍过的Webpack的核心类。依赖(Dependency)，模块(Module)，模块工厂(Module Factory)，javascript解析类(Javascript Parser)。这些类职责明确，功能聚焦。 Wepback打包工具的出现，解决了手动管理依赖的问题。Wepback最为核心的能力是构建依赖图(Module Graph)。这个依赖图维护了各个文件的依赖关系。Wepback的依赖图是一个有向无环图(DAG), 不能成环，成环代表循环依赖。 <img src="/blogBuild/learning/webpack/webpack_DAG.webp" alt="An image"></p><p>Comilation这个类，负责创建去构建依赖关系图。 从Compilation这个类出发，我们会介绍其重要的属性和行为。最后我们会将这些 流程穿起来，看一下Wepback是如何构建依赖DAG图的。</p><h3 id="compilation中维护的重要属性" tabindex="-1">Compilation中维护的重要属性 <a class="header-anchor" href="#compilation中维护的重要属性" aria-label="Permalink to &quot;Compilation中维护的重要属性&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        factorizeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FactorizeModuleOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleFactoryResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// factroize队列</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        addModuleQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加模块队列</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        buildQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncQueue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        processDependenciesQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AsyncQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        compiler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Compiler</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // comipler实例</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        dependencyFactories</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DepConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 依赖工厂映射表</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        moduleGraph</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleGraph</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 依赖图</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 模块集合</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>Compilation中维护了四个任务队列, factorizeQueue, addModuleQueue, buildQueue, processDependenciesQueue。 每条队列都负责一项任务。</p><ol><li>factorizeQueue，根据上文中的介绍以及命名，可以联想到这个队列中的任务是将依赖通过工厂的方式，产生模块。 这个过程就是factorize的过程。在生成模块后。</li><li>从addModuleQueue队列中取出addModule任务，将生成的模块添加到compilation实例中modules集合中。</li><li>从buildQueue中取出build任务，根据前面的介绍，能够联想到，这个任务就是在用loaders翻译源码，并通过jsParser进行解析，寻找依赖的任务。 最后，</li><li>从processDependenciesQueue中，取出ProcessDependencies任务，再次对其中的每一个dependency进行工厂化，然后添加模块，build模块，....., 以次来递归的完成整个依赖的构建。</li></ol><h3 id="compilation中维护的重要函数" tabindex="-1">Compilation中维护的重要函数 <a class="header-anchor" href="#compilation中维护的重要函数" aria-label="Permalink to &quot;Compilation中维护的重要函数&quot;">​</a></h3><p>介绍完Compilation中维护的重要的属性，整个递归构建的流程就是围绕这四个异步队列中的异步任务进行展开。 因此下面再介绍Compilation中的重要的函数，其中就包括上述讨论的将异步任务入列的函数。</p><h4 id="factorizemodule函数" tabindex="-1">_factorizeModule函数 <a class="header-anchor" href="#factorizemodule函数" aria-label="Permalink to &quot;_factorizeModule函数&quot;">​</a></h4><p>_factorizeModule函数，将依赖工厂化，调用factory.create()方法进行工厂化</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {FactorizeModuleOptions}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> options object</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {ModuleOrFactoryResultCallback}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> callback</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> callback</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {void}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    _factorizeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 	{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		currentProfile,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		factory,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		dependencies,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		originModule,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		factoryResult,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		contextInfo,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		context</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 	callback</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ) { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // .... </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // 通过调用Module工厂的create方法，生成相应的Module</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     factory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 			// ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		}, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // 创建Module成功的回调, 执行传入进来的callback()函数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, factoryResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.module);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     }</span></span></code></pre></div><h4 id="addmodule函数" tabindex="-1">_addModule函数 <a class="header-anchor" href="#addmodule函数" aria-label="Permalink to &quot;_addModule函数&quot;">​</a></h4><p>_addModule任务将factorize生成出来的模块，缓存并添加到Compilation的modules集合中</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    _addModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback) { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._modules.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(identifier, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.modules.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h3 id="buildmodule函数" tabindex="-1">_buildModule函数 <a class="header-anchor" href="#buildmodule函数" aria-label="Permalink to &quot;_buildModule函数&quot;">​</a></h3><p>_buildModule任务，调用生成模块的build方法，进行解析，寻找模块的依赖。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   _buildModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">needBuild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">needBuild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //....,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span></code></pre></div><h3 id="processmoduledependencies函数" tabindex="-1">_processModuleDependencies函数 <a class="header-anchor" href="#processmoduledependencies函数" aria-label="Permalink to &quot;_processModuleDependencies函数&quot;">​</a></h3><p>_processModuleDependencies任务，循环遍历所有的模块依赖， 将模块依赖转化成Module，调用handleModuleCreation形成一个闭环。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ....</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onDependenciesSorted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 遍历依赖</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sortedDependencies) { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 调用handleModuleCreation, 调用模块生成的函数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleModuleCreation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span></code></pre></div><h4 id="handlemodulecreation函数。" tabindex="-1">handleModuleCreation函数。 <a class="header-anchor" href="#handlemodulecreation函数。" aria-label="Permalink to &quot;handleModuleCreation函数。&quot;">​</a></h4><p>handleModuleCreation函数，将上述的流程串联起来。 首先是添加factrozieModule任务, 任务执行回调中，添加模块addModule任务， addModule任务的回调中，添加buildModule任务，buildModule任务后，根据上文提到的_processModuleDependencies函数， 再次调用handleModuleCreation函数，形成一个闭环。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleModuleCreation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 	{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		factory,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		dependencies,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		originModule,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		contextInfo,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		context,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		recursive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		connectOrigin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> recursive,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		checkCycle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recursive</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 	callback</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // .....</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // 调用factorizeModuel进行</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">factorizeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		// ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 		(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">factoryResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // ....</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // 调用添加Module </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">             this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newModule, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 // ....</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 // 调用_handleModuleBuildAndDependencies函数，检查其依赖，添加该模块对应的依赖</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                 this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_handleModuleBuildAndDependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 					originModule,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 					module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 					recursive,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 					checkCycle,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 					callback</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 				);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div><h4 id="哪里是开始" tabindex="-1">哪里是开始? <a class="header-anchor" href="#哪里是开始" aria-label="Permalink to &quot;哪里是开始?&quot;">​</a></h4><p>上文所述, 是构建循环依赖的流程，但问题是DAG依赖图，一开始的依赖是谁? 一旦明确了开始的一个依赖后， 整个流程就顺理成章，将依赖转成Module, 然后找Module的依赖, 一直递归下去。 说到这块，大家就自然能够联想到webpack的配置，webpack.config.js中配置了entry入口。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  entry: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/to/my/entry/file.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>这个Entry的入口文件，就是一个<strong>依赖</strong>, 在EntryPlugin中，有一个静态的方法， 这个方法是createDependency就是在创建一个入口的依赖。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EntryPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compiler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		compiler.hooks.compilation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;EntryPlugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">normalModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 关联工厂与dependency关系</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				compilation.dependencyFactories.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					EntryDependency,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					normalModuleFactory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EntryPlugin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createDependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entry, options);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		compiler.hooks.make.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tapAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;EntryPlugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 调用了compilation的addEntry方法，启动整个依赖查找流程</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			compilation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, dep, options, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">				callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	    }   </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 常见依赖</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createDependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EntryDependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entry);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dep;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>我们来看一下addEntry函数，里边调用了_addEntryItem函数，_addEntryItem调用了addModuleTree方法， addModuleTree中，调用了我们熟知的handleModuleCreation的方法。开启了整个流程。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        addEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, entry, optionsOrName, callback) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ....</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_addEntryItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, entry, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options, callback);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        _addEntryItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, entry, target, options, callback) { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ....</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addModuleTree</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               // ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        addModuleTree</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ context, dependency, contextInfo }, callback) { </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ....</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleModuleCreation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span></code></pre></div><h2 id="webpack构建流程-生成modulegraph" tabindex="-1">Webpack构建流程(生成ModuleGraph) <a class="header-anchor" href="#webpack构建流程-生成modulegraph" aria-label="Permalink to &quot;Webpack构建流程(生成ModuleGraph)&quot;">​</a></h2><p><img src="/blogBuild/learning/webpack/webpack_build_process.png" alt="An image"></p><ol><li>EntryPlugin将webpack配置文件中的entry转换为依赖，并调用compilation类的addEntry方法</li><li>执行_factorizeModule，根据依赖的类型，通过模块工厂(Module Factory)创建出模块(Module)</li><li>执行_addModule, 存储Module</li><li>执行_buildModule，开始构建 <ol><li>执行loader, 将不同类型的文件转换成webpack能够解析的javascript文件</li><li>调用acorn的parse方法将js代码解析为抽象语法树</li><li>遇到import语句时，调用当前模块的addDependency方法，给模块添加其依赖。</li></ol></li><li>给Module模块添加依赖完毕后，执行处理各个模块依赖的函数_processModuleDependencies， 遍历依赖，返回到流程2，递归进行构建。</li><li>所有依赖都解析完毕后，构建阶段结束。</li></ol><h3 id="依赖图-module-graph" tabindex="-1">依赖图(Module Graph) <a class="header-anchor" href="#依赖图-module-graph" aria-label="Permalink to &quot;依赖图(Module Graph)&quot;">​</a></h3><p>webpack如何利用数据结构来表达依赖图?<br> 图是一种重要的数据结构，Graphs是由节点和边组成的非线性数据结构。 在依赖图中，Module代表一个模块节点， ModuleGraphModule代表一个模块节点的出边和入边。ModuleGrpahConnection代表一条边， 这个边链接着模块节点。如下图所示: <img src="/blogBuild/learning/webpack/moduleGraph.png" alt="An image"> entry1.js文件(模块)引用了a.js文件(模块)，a.js文件(模块)引用了a1.js文件(模块)。 a.js文件(模块)是一个ModuleGraphModule, 它有一条入边，一条出边。 我们先来看ModuleGraphConnection这个类。 这个类中维护了originModule, dependency, moudle这三个概念。</p><ol><li>originModule是&quot;referencing&quot; moudle，代表其是一个主动引用别的模块的模块。例子中是entry1.js对应的模块 在例子中是entry1.js</li><li>dependency是&quot;referencing&quot; dependency, 代表主动引用的那个模块对应的依赖。</li><li>module是&quot;referenced&quot; module, 代表是被引用的模块。例子中是a1.js对应的模块</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleGraphConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Module|null}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> originModule</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> the referencing module</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Dependency|null}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dependency</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> the referencing dependency</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Module}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> module</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> the referenced module</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {string=}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explanation</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> some extra detail</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {boolean=}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> weak</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> the reference is weak</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {false | null | GetConditionFn | undefined}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> condition</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> condition for the connection</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        originModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">		dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">		module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">		explanation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">		weak</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">		condition</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>接下来我们在看一下ModuleGraphModule这个类: 这个类代表依赖图中的一个节点。在模型中，它有一些入边，一些出边。 入边代表其<strong>被</strong>其它的某些模块所依赖。出边代表其<strong>依赖了</strong>其它的某些模块。 ModuleGraphModule上有两个重要的属性:</p><ol><li>incomingConnections:表示入边。数据结构是一个集合，集合中包含了一系列的GraphConnection<code> Set&lt;ModuleGraphConnection&gt;</code></li><li>outgoingConnections: 表示出边。数据结构是也是一个集合，集合中包含了一系列的GraphConnection<code>Set&lt;ModuleGraphConnection&gt;</code></li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@typedef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {SortableSet&lt;ModuleGraphConnection&gt;}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IncomingConnections</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@typedef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {SortableSet&lt;ModuleGraphConnection&gt;}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OutgoingConnections</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleGraphModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {IncomingConnections}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.incomingConnections </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SortableSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {OutgoingConnections | undefined}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.outgoingConnections </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在介绍完ModuleGraphConnection和MouleGrpahModule后，我们再来看ModuleGrpah这个类。 这个类管理着上述这两个概念的关系。 ModuleGraph上有_moudleMap和_dependencyMap这两个属性。</p><ol><li>_mouodleMap的数据结构是Map映射<code>Map&lt;Module, ModuleGraphModule&gt;</code>。这个Map数据结构要表达出模块节点的依赖和这个节点被哪些模块所依赖的这个概念。</li><li>_dependencyMap的数据结构是WeakMap映射<code>WeakMap&lt;Dependency, ModuleGraphConnection | null&gt;</code>。这个Map的数据结构要表达依赖与连接边的对应关系。</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ModuleGraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {WeakMap&lt;Dependency, ModuleGraphConnection | null&gt;}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@private</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._dependencyMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WeakMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Map&lt;Module, ModuleGraphModule&gt;}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		 * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@private</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._moduleMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>有了这三个类，webpack对依赖图中的概念进行了表达。有了模型后，对数据的管理和操作就会变得非常的容易。 ModuleGrpah在weabpack中是个非常重要的概念。依赖图在后续的打包流程中起到了非常重要的作用。因此本小节 介绍了webpack对依赖图中的概念如何进行表达和临摹。</p><h2 id="debugging-webpack源码" tabindex="-1">Debugging Webpack源码 <a class="header-anchor" href="#debugging-webpack源码" aria-label="Permalink to &quot;Debugging Webpack源码&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">git clone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recurse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">submodules git@github.com:Andrei0872</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">understanding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webpack.git</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yarn</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/blogBuild/learning/metaprogramming.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>元编程</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"CdW9MmW8\",\"article_1_machinelearning_index.md\":\"DTQaewsC\",\"article_1_machinelearning_readme.md\":\"CzFshG1h\",\"article_2_deeplearning_index.md\":\"Bmh0c2Y_\",\"article_2_deeplearning_readme.md\":\"cEXrHpsz\",\"article_index.md\":\"TmYXbpL2\",\"homepage.md\":\"Cqkqx78S\",\"index.md\":\"UsRcjyat\",\"knowledge_algorithm_binarysearch_index.md\":\"BmQbjcd6\",\"knowledge_algorithm_binarysearch_readme.md\":\"DcWaTpKi\",\"knowledge_algorithm_cache_index.md\":\"eSQBAm93\",\"knowledge_algorithm_cache_readme.md\":\"BKi3DgC-\",\"knowledge_algorithm_dp_index.md\":\"DA-pDlcZ\",\"knowledge_algorithm_dp_readme.md\":\"CFApqory\",\"knowledge_algorithm_index.md\":\"C85VJRDl\",\"knowledge_algorithm_priorityqueue_index.md\":\"DH-FNMXL\",\"knowledge_algorithm_priorityqueue_readme.md\":\"BpcYUM4J\",\"knowledge_algorithm_readme.md\":\"Cul9ZYUh\",\"knowledge_algorithm_sort_index.md\":\"BUMCXrMA\",\"knowledge_algorithm_sort_readme.md\":\"3UGTJ-t7\",\"knowledge_algorithm_tree_1_binarytree_bfs_index.md\":\"tMvQCKU7\",\"knowledge_algorithm_tree_1_binarytree_bfs_readme.md\":\"Br42Cbtm\",\"knowledge_algorithm_tree_1_binarytree_dfs_index.md\":\"CCbHYOI7\",\"knowledge_algorithm_tree_1_binarytree_dfs_readme.md\":\"CXxb75OB\",\"knowledge_algorithm_tree_1_binarytree_index.md\":\"CfDxMG-w\",\"knowledge_algorithm_tree_1_binarytree_memroysearch_index.md\":\"BEPQLgW4\",\"knowledge_algorithm_tree_1_binarytree_memroysearch_readme.md\":\"CqYFln-r\",\"knowledge_algorithm_tree_1_binarytree_readme.md\":\"DvbCrr5F\",\"knowledge_algorithm_tree_2_searchtree_2_orderedbinarytree_index.md\":\"Msrkr09y\",\"knowledge_algorithm_tree_2_searchtree_2_orderedbinarytree_readme.md\":\"CDkaovP4\",\"knowledge_algorithm_tree_2_searchtree_3_avltree_index.md\":\"DEz7Z2dy\",\"knowledge_algorithm_tree_2_searchtree_3_avltree_readme.md\":\"DSjEDmhT\",\"knowledge_algorithm_tree_2_searchtree_4_redblacktree_index.md\":\"DxD0UUF_\",\"knowledge_algorithm_tree_2_searchtree_4_redblacktree_readme.md\":\"CjyW3B6E\",\"knowledge_algorithm_tree_2_searchtree_index.md\":\"CfhLyjFn\",\"knowledge_algorithm_tree_2_searchtree_readme.md\":\"DBWZGwF-\",\"knowledge_algorithm_tree_index.md\":\"DtTSsz4z\",\"knowledge_algorithm_tree_readme.md\":\"X9nGcpn4\",\"knowledge_cpp_concept_index.md\":\"C-uQyXPS\",\"knowledge_cpp_concept_readme.md\":\"BXDOfGIf\",\"knowledge_cpp_concurrency_index.md\":\"BcI77uXl\",\"knowledge_cpp_concurrency_readme.md\":\"D1e-15Iq\",\"knowledge_cpp_oop_index.md\":\"D56WIVQ2\",\"knowledge_cpp_oop_readme.md\":\"BmJohKg0\",\"knowledge_cpp_stl_index.md\":\"kbYIz_BI\",\"knowledge_cpp_stl_readme.md\":\"CBNRpJky\",\"knowledge_index.md\":\"CN5odMy6\",\"knowledge_jsfundation_code_index.md\":\"DK9kOUoF\",\"knowledge_jsfundation_code_readme.md\":\"C1KGabGX\",\"knowledge_jsfundation_concept_index.md\":\"D-74M7eO\",\"knowledge_jsfundation_concept_readme.md\":\"Cw_vhYFI\",\"knowledge_jsfundation_designpattern_index.md\":\"DWC2h-Pw\",\"knowledge_jsfundation_designpattern_readme.md\":\"lhLKj4gz\",\"knowledge_jsfundation_memory_index.md\":\"DsvaGGwR\",\"knowledge_jsfundation_memory_readme.md\":\"DIVxYp6B\",\"knowledge_jsfundation_promise_asynccontrol_index.md\":\"BTEXKoNs\",\"knowledge_jsfundation_promise_asynccontrol_readme.md\":\"DBaFaQ9Q\",\"knowledge_jsfundation_promise_index.md\":\"3yhYWZrw\",\"knowledge_jsfundation_promise_overview_index.md\":\"D3vLfF6b\",\"knowledge_jsfundation_promise_overview_readme.md\":\"CmZF6qWg\",\"knowledge_jsfundation_readme.md\":\"BaMfCl17\",\"knowledge_modulesystem_index.md\":\"cVfWyeMk\",\"knowledge_modulesystem_modulesystem_index.md\":\"D9JQCSp_\",\"knowledge_modulesystem_modulesystem_readme.md\":\"Dz2Z4kuv\",\"knowledge_modulesystem_webpack_build_index.md\":\"DkdjZyT_\",\"knowledge_modulesystem_webpack_build_readme.md\":\"C5bnTpxx\",\"knowledge_modulesystem_webpack_config_index.md\":\"CExdqLh-\",\"knowledge_modulesystem_webpack_config_readme.md\":\"6nfjybYt\",\"knowledge_modulesystem_webpack_hmr_index.md\":\"Z4jCF7TC\",\"knowledge_modulesystem_webpack_hmr_reame.md\":\"C4t3LV01\",\"knowledge_modulesystem_webpack_index.md\":\"DmQgutNw\",\"knowledge_modulesystem_webpack_loader_index.md\":\"DvBRwCYU\",\"knowledge_modulesystem_webpack_loader_readme.md\":\"DnahozvU\",\"knowledge_modulesystem_webpack_optimization_index.md\":\"DPyZykZU\",\"knowledge_modulesystem_webpack_optimization_readme.md\":\"B7t0ZGfv\",\"knowledge_modulesystem_webpack_plugin_index.md\":\"DiOO3v0_\",\"knowledge_modulesystem_webpack_plugin_readme.md\":\"VGnk1F5A\",\"knowledge_modulesystem_webpack_readme.md\":\"BQtT9ojx\",\"knowledge_network_dns_index.md\":\"B4cvR4uc\",\"knowledge_network_dns_readme.md\":\"BIVCzyGP\",\"knowledge_network_http_index.md\":\"C0dG2rk0\",\"knowledge_network_http_readme.md\":\"BvK5fLvH\",\"knowledge_network_https_index.md\":\"Dz-XiPD_\",\"knowledge_network_https_readme.md\":\"DBkn-Qgy\",\"knowledge_network_httpversion_index.md\":\"BBiNlxBb\",\"knowledge_network_httpversion_readme.md\":\"CbxA_2q9\",\"knowledge_network_osimodel_index.md\":\"C86tLx4B\",\"knowledge_network_osimodel_readme.md\":\"CvbQUoK8\",\"knowledge_network_safety_index.md\":\"BfB59KNI\",\"knowledge_network_safety_readme.md\":\"Bpr7VijB\",\"knowledge_network_transportlayer_index.md\":\"BX3SMp36\",\"knowledge_network_transportlayer_readme.md\":\"CfaLcyZ7\",\"knowledge_webframework_arkui_index.md\":\"C_oEUT5g\",\"knowledge_webframework_arkui_readme.md\":\"DLtd60Dw\",\"knowledge_webframework_arkui_render_index.md\":\"CKe9IaD9\",\"knowledge_webframework_arkui_render_readme.md\":\"x3MHYU5Z\",\"knowledge_webframework_index.md\":\"BbFiCE0o\",\"knowledge_webframework_readme.md\":\"CY15TVrA\",\"knowledge_webframework_vueframework_0initprocess_index.md\":\"Bb7AA-ga\",\"knowledge_webframework_vueframework_0initprocess_readme.md\":\"CNlsK4RG\",\"knowledge_webframework_vueframework_1mvvm_index.md\":\"DU2Q_kyZ\",\"knowledge_webframework_vueframework_1mvvm_readme.md\":\"BxpXSyv1\",\"knowledge_webframework_vueframework_2communication_index.md\":\"DTiFdWiV\",\"knowledge_webframework_vueframework_2communication_readme.md\":\"MPD1ZaWM\",\"knowledge_webframework_vueframework_3vuerouter_index.md\":\"YzWwX3b_\",\"knowledge_webframework_vueframework_3vuerouter_readme.md\":\"BSKEYEeE\",\"knowledge_webframework_vueframework_4vuex_index.md\":\"BgSlfSkh\",\"knowledge_webframework_vueframework_4vuex_readme.md\":\"Cw7R1EOX\",\"knowledge_webframework_vueframework_5vueversion_index.md\":\"BJ6SiepK\",\"knowledge_webframework_vueframework_5vueversion_readme.md\":\"2Q1GSU0L\",\"knowledge_webframework_vueframework_index.md\":\"zF7oGBVD\",\"knowledge_webframework_vueframework_readme.md\":\"OoSv2iLp\",\"learning_index.md\":\"D6qaNe4Q\",\"learning_metaprogramming_index.md\":\"DqTDssSS\",\"learning_metaprogramming_readme.md\":\"DJYFeUcZ\",\"learning_mvvm_angular_index.md\":\"D_he4X3J\",\"learning_mvvm_angular_readme.md\":\"CRXQZJNg\",\"learning_mvvm_index.md\":\"D30A27P9\",\"learning_mvvm_readme.md\":\"u6fpQPIV\",\"learning_mvvm_vue_1_dependency_collection_index.md\":\"CQfN8MYT\",\"learning_mvvm_vue_1_dependency_collection_readme.md\":\"DcQ6z4-A\",\"learning_mvvm_vue_2_diff_index.md\":\"9i3fOFcE\",\"learning_mvvm_vue_2_diff_readme.md\":\"DP5z4lT4\",\"learning_mvvm_vue_index.md\":\"DtA4CdN-\",\"learning_mvvm_vue_readme.md\":\"cgPV0f7o\",\"learning_readme.md\":\"BmhigThH\",\"learning_weakreference_index.md\":\"raiEHunU\",\"learning_weakreference_readme.md\":\"BbIAdSzK\",\"learning_webpack_1_compilation_index.md\":\"BLj2Fr37\",\"learning_webpack_1_compilation_readme.md\":\"C9Y9CDfG\",\"learning_webpack_2_compilation2_index.md\":\"BCIy6T8U\",\"learning_webpack_2_compilation2_readme.md\":\"Cy3w0ykZ\",\"learning_webpack_3_asyncqueue_index.md\":\"BJzaxzsV\",\"learning_webpack_3_asyncqueue_readme.md\":\"BHicUJTJ\",\"learning_webpack_4_desingpattern_index.md\":\"BlGLgCMo\",\"learning_webpack_4_desingpattern_readme.md\":\"BvRdlY8N\",\"learning_webpack_5_loader_index.md\":\"Dw3s5VE4\",\"learning_webpack_5_loader_readme.md\":\"DfMZ2Oz3\",\"learning_webpack_index.md\":\"BiBT0gPX\",\"learning_webpack_readme.md\":\"DACiIAaj\",\"markdown-examples.md\":\"DrobOnzq\",\"project_communication_class_index.md\":\"DFKCuPhk\",\"project_communication_class_readme.md\":\"D0rYhtEd\",\"project_communication_component_index.md\":\"CwBl7P_U\",\"project_communication_component_readme.md\":\"BVpUtCE6\",\"project_communication_index.md\":\"C_TnGwrk\",\"project_communication_ipc_index.md\":\"D7uaRFT2\",\"project_communication_ipc_readme.md\":\"CSlRhaJ3\",\"project_communication_readme.md\":\"BxxfyrE3\",\"project_componentdesign_componentarchitecture_index.md\":\"B2963xbV\",\"project_componentdesign_componentarchitecture_readme.md\":\"DquFtFKz\",\"project_componentdesign_componentlogicreuse_index.md\":\"oUvIJGil\",\"project_componentdesign_componentlogicreuse_readme.md\":\"CkP2_231\",\"project_componentdesign_index.md\":\"CmU_KrzH\",\"project_componentdesign_readme.md\":\"CawtnqBv\",\"project_cpp_1_threadpool_index.md\":\"DKFeWoKS\",\"project_cpp_1_threadpool_readme.md\":\"BtRWntvC\",\"project_cpp_2_connectionpool_index.md\":\"CmuSxDBt\",\"project_cpp_2_connectionpool_readme.md\":\"DUtspWMa\",\"project_cpp_index.md\":\"Dqij_1jj\",\"project_cpp_readme.md\":\"DlK4lX-Q\",\"project_dora_index.md\":\"CDX-A85n\",\"project_dora_reade.md\":\"RwZmu6Jp\",\"project_index.md\":\"BdvfoiRV\",\"project_rabc_index.md\":\"DdbaRVR6\",\"project_rabc_readme.md\":\"k6tfgbwY\",\"techstack_index.md\":\"CeJV7Ik1\",\"techstack_readme.md\":\"BZZHegDa\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"个人博客\",\"description\":\"记录技术想法\",\"base\":\"/blogBuild/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"MusicPlayer\",\"items\":[{\"component\":\"HelloWorld\"}]},{\"text\":\"知识库\",\"link\":\"/article/\"},{\"text\":\"源码学习\",\"items\":[{\"text\":\"概述\",\"link\":\"/learning/\"},{\"text\":\"webpack\",\"items\":[{\"text\":\"概述\",\"link\":\"/learning/webpack\"},{\"text\":\"核心对象1\",\"link\":\"/learning/webpack/1_compilation\"},{\"text\":\"核心对象2\",\"link\":\"/learning/webpack/2_compilation2\"},{\"text\":\"异步任务调度\",\"link\":\"/learning/webpack/3_asyncQueue\"},{\"text\":\"设计模式\",\"link\":\"/learning/webpack/4_desingPattern\"}]},{\"text\":\"弱引用\",\"link\":\"/learning/weakReference\"},{\"text\":\"mvvm\",\"items\":[{\"text\":\"概述\",\"link\":\"/learning/mvvm\"},{\"text\":\"Vue\",\"link\":\"/learning/mvvm/vue\"},{\"text\":\"Angular\",\"link\":\"/learning/mvvm/angular\"}]},{\"text\":\"元编程\",\"link\":\"/learning/metaprogramming\"}]},{\"text\":\"项目\",\"items\":[{\"text\":\"RABC\",\"link\":\"/project/rabc\"},{\"text\":\"效能度量\",\"link\":\"/project/DORA\"},{\"text\":\"组件设计\",\"items\":[{\"text\":\"概述\",\"link\":\"/project/componentDesign\"},{\"text\":\"组织结构\",\"link\":\"/project/componentDesign/componentArchitecture\"},{\"text\":\"组件抽象\",\"link\":\"/project/componentDesign/componentLogicReuse\"}]},{\"text\":\"通信\",\"items\":[{\"text\":\"概述\",\"link\":\"/project/communication\"},{\"text\":\"组件\",\"link\":\"/project/communication/component\"},{\"text\":\"类\",\"link\":\"/project/communication/class\"},{\"text\":\"进程\",\"link\":\"/project/communication/ipc\"}]},{\"text\":\"CPP项目\",\"items\":[{\"text\":\"总览\",\"link\":\"/project/cpp\"},{\"text\":\"线程池\",\"link\":\"/project/cpp/1_threadPool\"},{\"text\":\"连接池\",\"link\":\"/project/cpp/2_connectionPool\"}]}]},{\"text\":\"计算机科学\",\"link\":\"/knowledge/jsFundation/code/ \"},{\"text\":\"技术栈\",\"link\":\"/techStack\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"sidebar\":{\"/knowledge/\":[{\"text\":\"数据结构和算法\",\"link\":\"knowledge/algorithm\",\"items\":[{\"text\":\"二分法\",\"link\":\"knowledge/algorithm/binarySearch\",\"items\":[]},{\"text\":\"缓存策略\",\"link\":\"knowledge/algorithm/cache\",\"items\":[]},{\"text\":\"动态规划\",\"link\":\"knowledge/algorithm/dp\",\"items\":[]},{\"text\":\"优先队列\",\"link\":\"knowledge/algorithm/priorityQueue\",\"items\":[]},{\"text\":\"排序算法\",\"link\":\"knowledge/algorithm/sort\",\"items\":[]},{\"text\":\"树\",\"link\":\"knowledge/algorithm/tree\",\"items\":[{\"text\":\"二叉树\",\"link\":\"knowledge/algorithm/tree/1_binaryTree\",\"items\":[{\"text\":\"广度优先\",\"link\":\"knowledge/algorithm/tree/1_binaryTree/bfs\",\"items\":[]},{\"text\":\"深度优先， 回溯\",\"link\":\"knowledge/algorithm/tree/1_binaryTree/dfs\",\"items\":[]},{\"text\":\"记忆化搜索\",\"link\":\"knowledge/algorithm/tree/1_binaryTree/memroySearch\",\"items\":[]}]},{\"text\":\"搜索树\",\"link\":\"knowledge/algorithm/tree/2_searchTree\",\"items\":[{\"text\":\"二叉搜索树\",\"link\":\"knowledge/algorithm/tree/2_searchTree/2_orderedBinaryTree\",\"items\":[]},{\"text\":\"AVL树\",\"link\":\"knowledge/algorithm/tree/2_searchTree/3_avlTree\",\"items\":[]},{\"text\":\"红黑树\",\"link\":\"knowledge/algorithm/tree/2_searchTree/4_RedBlackTree\",\"items\":[]}]}]}]},{\"text\":\"cpp\",\"link\":\"knowledge/cpp\",\"items\":[{\"text\":\"Cpp基础概念\",\"link\":\"knowledge/cpp/concept\",\"items\":[]},{\"text\":\"并发编程\",\"link\":\"knowledge/cpp/concurrency\",\"items\":[]},{\"text\":\"面向对象\",\"link\":\"knowledge/cpp/oop\",\"items\":[]},{\"text\":\"STL容器\",\"link\":\"knowledge/cpp/stl\",\"items\":[]}]},{\"text\":\"js\",\"link\":\"knowledge/jsFundation\",\"items\":[{\"text\":\"基础源码\",\"link\":\"knowledge/jsFundation/code\",\"items\":[]},{\"text\":\"js基础概念\",\"link\":\"knowledge/jsFundation/concept\",\"items\":[]},{\"text\":\"js设计模式\",\"link\":\"knowledge/jsFundation/designPattern\",\"items\":[]},{\"text\":\"js内存分配，垃圾回收机制\",\"link\":\"knowledge/jsFundation/memory\",\"items\":[]},{\"text\":\"promise\",\"link\":\"knowledge/jsFundation/promise\",\"items\":[{\"text\":\"异步控制\",\"link\":\"knowledge/jsFundation/promise/asyncControl\",\"items\":[]},{\"text\":\"js单线程概述\",\"link\":\"knowledge/jsFundation/promise/overview\",\"items\":[]}]}]},{\"text\":\"ModuleSystem\",\"link\":\"knowledge/ModuleSystem\",\"items\":[{\"text\":\"js模块系统\",\"link\":\"knowledge/ModuleSystem/moduleSystem\",\"items\":[]},{\"text\":\"webpack打包工具\",\"link\":\"knowledge/ModuleSystem/webpack\",\"items\":[{\"text\":\"打包构建\",\"link\":\"knowledge/ModuleSystem/webpack/build\",\"items\":[]},{\"text\":\"配置\",\"link\":\"knowledge/ModuleSystem/webpack/config\",\"items\":[]},{\"text\":\"hmr\",\"link\":\"knowledge/ModuleSystem/webpack/hmr\",\"items\":[]},{\"text\":\"Loader\",\"link\":\"knowledge/ModuleSystem/webpack/loader\",\"items\":[]},{\"text\":\"优化\",\"link\":\"knowledge/ModuleSystem/webpack/optimization\",\"items\":[]},{\"text\":\"Plugin\",\"link\":\"knowledge/ModuleSystem/webpack/plugin\",\"items\":[]}]}]},{\"text\":\"network\",\"link\":\"knowledge/network\",\"items\":[{\"text\":\"dns域名介绍\",\"link\":\"knowledge/network/dns\",\"items\":[]},{\"text\":\"http介绍\",\"link\":\"knowledge/network/http\",\"items\":[]},{\"text\":\"https介绍\",\"link\":\"knowledge/network/https\",\"items\":[]},{\"text\":\"http1.0/http2.0\",\"link\":\"knowledge/network/httpVersion\",\"items\":[]},{\"text\":\"网络模型\",\"link\":\"knowledge/network/OSIModel\",\"items\":[]},{\"text\":\"网络安全\",\"link\":\"knowledge/network/safety\",\"items\":[]},{\"text\":\"传输层\",\"link\":\"knowledge/network/transportLayer\",\"items\":[]}]},{\"text\":\"web与web框架框架\",\"link\":\"knowledge/webFramework\",\"items\":[{\"text\":\"ArkUI框架\",\"link\":\"knowledge/webFramework/arkUI\",\"items\":[{\"text\":\"渲染流程\",\"link\":\"knowledge/webFramework/arkUI/render\",\"items\":[]}]},{\"text\":\"Vue框架及Vue周边生态\",\"link\":\"knowledge/webFramework/vueFrameWork\",\"items\":[{\"text\":\"Vue初始化流程\",\"link\":\"knowledge/webFramework/vueFrameWork/0initProcess\",\"items\":[]},{\"text\":\"依赖收集\",\"link\":\"knowledge/webFramework/vueFrameWork/1mvvm\",\"items\":[]},{\"text\":\"组件通信\",\"link\":\"knowledge/webFramework/vueFrameWork/2communication\",\"items\":[]},{\"text\":\"Vue-Router\",\"link\":\"knowledge/webFramework/vueFrameWork/3vueRouter\",\"items\":[]},{\"text\":\"Vuex\",\"link\":\"knowledge/webFramework/vueFrameWork/4vuex\",\"items\":[]},{\"text\":\"Vue版本演进\",\"link\":\"knowledge/webFramework/vueFrameWork/5vueVersion\",\"items\":[]}]}]}],\"/learning/\":[{\"text\":\"元编程\",\"link\":\"learning/metaprogramming\",\"items\":[]},{\"text\":\"MVVM前端框架\",\"link\":\"learning/mvvm\",\"items\":[{\"text\":\"Angular数据驱动UI变化\",\"link\":\"learning/mvvm/angular\",\"items\":[]},{\"text\":\"Vue数据驱动UI变化\",\"link\":\"learning/mvvm/vue\",\"items\":[{\"text\":\"Vue响应收集\",\"link\":\"learning/mvvm/vue/1_dependency_collection\",\"items\":[]},{\"text\":\"Diff算法更新视图\",\"link\":\"learning/mvvm/vue/2_diff\",\"items\":[]}]}]},{\"text\":\"弱引用理念和运用\",\"link\":\"learning/weakReference\",\"items\":[]},{\"text\":\"webpack源码学习\",\"link\":\"learning/webpack\",\"items\":[{\"text\":\"打包过程中核心对象1\",\"link\":\"learning/webpack/1_compilation\",\"items\":[]},{\"text\":\"打包过程中核心对象2\",\"link\":\"learning/webpack/2_compilation2\",\"items\":[]},{\"text\":\"异步任务调度\",\"link\":\"learning/webpack/3_asyncQueue\",\"items\":[]},{\"text\":\"设计模式\",\"link\":\"learning/webpack/4_desingPattern\",\"items\":[]},{\"text\":\"loader翻译\",\"link\":\"learning/webpack/5_loader\",\"items\":[]}]}],\"/project/\":[{\"text\":\"通信与通信协议\",\"link\":\"project/communication\",\"items\":[{\"text\":\"类间通信\",\"link\":\"project/communication/class\",\"items\":[]},{\"text\":\"组件通信\",\"link\":\"project/communication/component\",\"items\":[]},{\"text\":\"进程间的通信机制\",\"link\":\"project/communication/ipc\",\"items\":[]}]},{\"text\":\"组件设计\",\"link\":\"project/componentDesign\",\"items\":[{\"text\":\"组织结构\",\"link\":\"project/componentDesign/componentArchitecture\",\"items\":[]},{\"text\":\"组件抽象\",\"link\":\"project/componentDesign/componentLogicReuse\",\"items\":[]}]},{\"text\":\"CPP项目\",\"link\":\"project/cpp\",\"items\":[{\"text\":\"线程池\",\"link\":\"project/cpp/1_threadPool\",\"items\":[]},{\"text\":\"连接池\",\"link\":\"project/cpp/2_connectionPool\",\"items\":[]}]},{\"text\":\"DORA\",\"link\":\"project/DORA\",\"items\":[]},{\"text\":\"RABC权限控制\",\"link\":\"project/rabc\",\"items\":[]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>